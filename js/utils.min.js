var loadingBarAnimation;var staticUrl=location.protocol+"//"+location.host+location.pathname;if(!String.format){String.format=function(c){var b=Array.prototype.slice.call(arguments,1);return c.replace(/{(\d+)}/g,function(d,e){return typeof b[e]!="undefined"?b[e]:d})}}$.urlParam=function(b){var c=new RegExp("[?&]"+b+"=([^&#]*)").exec(window.location.href);if(c==null){return null}else{return decodeURI(c[1])||0}};function roundNumber(e,h){if(!(""+e).includes("e")){return +(Math.round(e+"e+"+h)+"e-"+h)}else{var b=(""+e).split("e");var g="";if(+b[1]+h>0){g="+"}var f=+b[0]+"e"+g+(+b[1]+h);var d=Math.round(f);var c=+(d+"e-"+h);return c}}function loadingBarTrigger(){$("#progressLoading").html(" ");switch(processBarAnimationStyle){case 1:var b=new ProgressBar.Circle("#progressLoading",{strokeWidth:processBarStrokeWidth,easing:"easeInOut",duration:timeDurationProcessBar,color:processBarColor,trailColor:processBarColor,trailWidth:0.01,svgStyle:null});b.animate(1);break;case 2:var c=new ProgressBar.Circle("#progressLoading",{color:processBarColor,trailColor:processBarLColor,strokeWidth:processBarStrokeWidth,duration:2500,easing:"easeInOut"});c.set(0.05);setTimeout(function(){c.animate(0.3)},1000);setTimeout(function(){c.animate(0.4)},3500);setTimeout(function(){c.animate(0.8)},5500);setTimeout(function(){c.animate(1)},8000);break}}function parseDate(c){var b=c.split("-");return new Date(b[0],b[1]-1,b[2])}function daydiff(c,b){return Math.round((b-c)/(1000*60*60*24))}function parseDevVersion(b){if(b.length>7){b=b.substring(0,7)}return b}function initializeChartjsPlugins(){Chart.pluginService.register({beforeRender:function(b){if(b.config.options.showAllTooltips){b.pluginTooltips=[];b.config.data.datasets.forEach(function(d,c){b.getDatasetMeta(c).data.forEach(function(f,e){b.pluginTooltips.push(new Chart.Tooltip({_chart:b.chart,_chartInstance:b,_data:b.data,_options:b.options.tooltips,_active:[f]},b))})});b.options.tooltips.enabled=false}},afterDraw:function(b,c){if(b.config.options.showAllTooltips){if(!b.allTooltipsOnce){if(c!==1){return}b.allTooltipsOnce=true}b.options.tooltips.enabled=true;Chart.helpers.each(b.pluginTooltips,function(d){d.initialize();d.update();d.pivot();d.transition(c).draw()});b.options.tooltips.enabled=false}}})}function loadTemplate(b){cleanErrorMsg();console.log(String.format("Cargando ID <{0}> ...",b));try{st=stat[b]}catch(c){throwErrorID(errorID.badtemplateid);return}finally{}try{$("#templateNameTxt").html(String.format('<a href="{1}">{0}</a>',st.header,st.link));$(document).prop("title","Stats - "+st.header);$("#progressLoading").fadeTo("slow",processBarSetOpacity);loadingBarTrigger();loadingBarAnimation=setInterval(function(){loadingBarTrigger()},timeDurationProcessBar+50)}catch(c){throwErrorID(errorID.loadingbarsetup);return}finally{}writeGraphCanvases();$("#tableMem").html("");if(!hasLoaded){$("#mainSelector option[value='none']").remove()}else{$("#footer").css("display","none");$("#mainContent").css("display","none");try{if($.fn.DataTable.isDataTable("#mainTable")){$("#mainTable").DataTable().clear().destroy();writeTableHeader()}}catch(c){throwErrorID(errorID.deletetable,c);return}finally{}}jQuery.get(String.format("{0}{1}",mainUrl,st.data),function(h){try{h=h.split("\n");var q=[];var n=[];var f=[];var d=[];try{for(var l=1;l<h.length;l++){a=[];line=h[l].split(" ");for(var g=0;g<line.length;g++){if(line[g]!=""){a.push(line[g])}}loadedData.push(a);q.push(parseInt(a[0]));n.push(parseFloat(a[2]));f.push(parseInt(a[4]));d.push(parseDevVersion(a[1]));$("#tableMem").append(String.format("<tr><td>{0}</td><td>{1}</td><td>{2}</td><td>{3}</td><td>{4}</td><td>{5}</td></tr>",a[0],a[1],a[2],a[3],a[4],a[5]))}}catch(o){throwErrorID(errorID.parsedata,o);return}finally{}try{lenghtmenuoption=[];if(loadedData.length>=tableMaxReg){lenghtmenuoption=[tableMinReg,tableMedReg,tableHighReg,tableMaxReg]}else{if(tableHighReg<=loadedData.length&&loadedData.length<tableMaxReg){lenghtmenuoption=[tableMinReg,tableMedReg,tableHighReg,loadedData.length]}else{if(tableMedReg<=loadedData.length&&loadedData.length<tableHighReg){lenghtmenuoption=[tableMinReg,tableMedReg,loadedData.length]}else{if(tableMinReg<=loadedData.length&&loadedData.length<tableMedReg){lenghtmenuoption=[tableMinReg,loadedData.length]}else{lenghtmenuoption=[loadedData.length]}}}}$("#mainTable").DataTable({language:{url:"http://latex.ppizarror.com/stats/res/tableSpanish.json"},order:[[0,"desc"]],lengthMenu:lenghtmenuoption})}catch(o){throwErrorID(errorID.generatetable,o);return}finally{}hasLoaded=true;try{mean_ctime=roundNumber(jStat.mean(n),2);plot_mean_ctime=[];plot_partial_mean_ctime=[];total_sum=0;for(k=0;k<loadedData.length;k++){plot_mean_ctime.push(mean_ctime);total_sum+=n[k];plot_partial_mean_ctime.push(roundNumber(total_sum/(k+1),2))}}catch(o){throwErrorID(errorID.calcctimemean,o);return}finally{}try{day_activity=[];day_activity_counter=[];for(var l=0;l<loadedData.length;l++){k=jQuery.inArray(loadedData[l][3],day_activity);if(k==-1){day_activity.push(loadedData[l][3]);day_activity_counter.push(1)}else{day_activity_counter[k]+=1}}}catch(o){throwErrorID(errorID.errorcreatedayactivitystat,o);return}finally{}try{new Chart($("#plot-activityday"),{type:"bar",data:{labels:day_activity,datasets:[{data:day_activity_counter,label:"Número de versiones por día",borderColor:"#7e0042",backgroundColor:"#7e0042"}]},options:{title:{display:false,text:"Actividad por día",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Número de versiones"}}],xAxes:[{scaleLabel:{display:true,labelString:"Día"}}]},legend:{display:true}}});if(plotXaxisID){new Chart($("#plot-ctime"),{type:"line",data:{labels:q,datasets:[{data:n,label:"Tiempo de compilación (s)",borderColor:"#8436d7",backgroundColor:"#8436d7",fill:false,borderWidth:plotLineWidth,radius:1},{data:plot_mean_ctime,label:"Promedio (s)",borderColor:"#e470f6",backgroundColor:"#e470f6",borderDash:[5,5],borderWidth:plotLineWidth,fill:false,radius:0},{data:plot_partial_mean_ctime,label:"Promedio parcial (s)",borderColor:"#fccf5f",backgroundColor:"#fccf5f",borderWidth:2,fill:false,radius:0}]},options:{title:{display:true,text:"Tiempo de compilación",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},tooltips:{mode:"index",intersect:false,callbacks:{title:function(e,i){elemindex=q.indexOf(parseInt(e[0].xLabel));if(elemindex!=-1){return String.format("ID:{2} v{0} ({1}) ",loadedData[elemindex][1],loadedData[elemindex][3],e[0].xLabel)}else{return e[0].xLabel}}}},responsive:true,scales:{yAxes:[{scaleLabel:{display:true,labelString:"Tiempo de compilación (s)"}}],xAxes:[{scaleLabel:{display:true,labelString:"ID de compilación"}}]},legend:{display:true}}});new Chart($("#plot-nline"),{type:"line",data:{labels:q,datasets:[{data:f,label:"Número de líneas de código",borderColor:"#3e95cd",backgroundColor:"#3e95cd",fill:false,radius:0,tension:0,borderWidth:plotLineWidth}]},options:{title:{display:true,text:"Número líneas de código en el tiempo",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Líneas de código"}}],xAxes:[{scaleLabel:{display:true,labelString:"ID de compilación"}}]},legend:{display:false},responsive:true,tooltips:{mode:"index",intersect:false}}})}else{new Chart($("#plot-ctime"),{type:"line",data:{labels:d,datasets:[{data:n,label:"Tiempo de compilación (s)",borderColor:"#8436d7",backgroundColor:"#8436d7",fill:false,borderWidth:plotLineWidth,radius:1},{data:plot_mean_ctime,label:"Promedio (s)",borderColor:"#e470f6",backgroundColor:"#e470f6",borderDash:[5,5],borderWidth:plotLineWidth,fill:false,radius:0},{data:plot_partial_mean_ctime,label:"Promedio parcial (s)",borderColor:"#fccf5f",backgroundColor:"#fccf5f",borderWidth:2,fill:false,radius:0}]},options:{title:{display:true,text:"Tiempo de compilación (ctime)",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},tooltips:{mode:"index",intersect:false},responsive:true,scales:{yAxes:[{scaleLabel:{display:true,labelString:"Tiempo de compilación (s)"}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:true}}});new Chart($("#plot-nline"),{type:"line",data:{labels:d,datasets:[{data:f,label:"Número de líneas de código",borderColor:"#3e95cd",backgroundColor:"#3e95cd",fill:false,radius:0,tension:0,borderWidth:plotLineWidth}]},options:{title:{display:false,text:"Línea de código en el tiempo",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Líneas de código"}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:true}}})}}catch(o){throwErrorID(errorID.genplots,o);return}finally{}downloads_link_compact=[];downloads_link_normal=[];downloads_total=[];lastday_released=[];var m=[];lastdownloads_compact_size=[];lastdownloads_normal_size=[];lastdownloads_total=[];lastversion_releases=[];sum_compactdownloads=0;sum_normaldownloads=0;var p=[];try{$.getJSON(st.json,function(r){for(j=r.length-1;j>=0;j--){try{downloads_link_compact.push(r[j].assets[0].download_count);downloads_link_normal.push(r[j].assets[1].download_count);downloads_total.push(r[j].assets[0].download_count+r[j].assets[1].download_count);m.push(r[j].published_at.substring(0,10));lastday_released.push(parseDate(r[j].published_at.substring(0,10)));lastdownloads_compact_size.push(roundNumber(r[j].assets[0].size/1000,2));lastdownloads_normal_size.push(roundNumber(r[j].assets[1].size/1000,2));lastdownloads_total.push(r[j].assets[0].download_count+r[j].assets[1].download_count);lastversion_releases.push(r[j].tag_name);sum_compactdownloads+=r[j].assets[0].download_count;sum_normaldownloads+=r[j].assets[1].download_count;p.push(r[j].tag_name)}catch(s){}}prev_downloads=getDownloadCounter(st.name);prev_downloads.reverse();for(var j=0;j<prev_downloads.length;j++){p.unshift(prev_downloads[j][1]);downloads_total.unshift(prev_downloads[j][0])}acum_downloads=[downloads_total[0]];for(var j=1;j<downloads_total.length;j++){acum_downloads.push(downloads_total[j]+acum_downloads[j-1])}sum_lastdownloads=sum_compactdownloads+sum_normaldownloads;lastday_total=[];for(var j=0;j<lastday_released.length-1;j++){lastday_total.push(Math.max(daydiff(lastday_released[j],lastday_released[j+1]),1))}lastday_total.push(Math.max(daydiff(lastday_released[lastday_released.length-1],new Date()),1));downloads_compact_per_day=[];downloads_normal_per_day=[];downloads_per_day=[];for(var j=0;j<lastday_total.length;j++){downloads_compact_per_day.push(roundNumber(downloads_link_compact[j]/lastday_total[j],2));downloads_normal_per_day.push(roundNumber(downloads_link_normal[j]/lastday_total[j],2));downloads_per_day.push(roundNumber(lastdownloads_total[j]/lastday_total[j],2))}try{new Chart($("#plot-downloadsperday"),{type:"line",data:{labels:lastversion_releases,datasets:[{data:downloads_per_day,label:"Descargas totales",borderColor:"#2b2b2b",backgroundColor:"#2b2b2b",fill:false,radius:1,borderWidth:plotLineWidth},{data:downloads_normal_per_day,label:"Modo normal",borderColor:"#606060",backgroundColor:"#606060",fill:false,radius:1,borderWidth:plotLineWidth},{data:downloads_compact_per_day,label:"Modo compacto",borderColor:"#a4a4a4",backgroundColor:"#a4a4a4",fill:false,radius:1,borderWidth:plotLineWidth}]},options:{title:{display:true,text:"Descargas por día",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Descargas por día"}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:true},responsive:true,tooltips:{enabled:true,mode:"index",callbacks:{title:function(e,i){elemindex=lastversion_releases.indexOf(e[0].xLabel);if(elemindex!=-1){return String.format("Versión {0} ({1})",e[0].xLabel,m[elemindex])}else{return e[0].xLabel}}}}}});new Chart($("#plot-pielastdays"),{type:"pie",data:{labels:["Versión compacta","Versión normal"],datasets:[{data:[sum_compactdownloads,sum_normaldownloads],label:"N° descargas de cada versión",borderColor:["#ff6000","#afac1a"],backgroundColor:["#ff6000","#afac1a"]}]},options:{title:{display:true,text:String.format("Distribución descargas últimas 30 versiones ({0} descargas)",sum_lastdownloads),fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},legend:{display:true,position:"right"},showAllTooltips:false,tooltips:{callbacks:{label:function(x,z){var w=z.datasets[x.datasetIndex].data;var u=z.labels[x.index];var y=w[x.index];var v=0;for(var e in w){v+=w[e]}var A=Math.round((y/v)*100);return u+": "+y+" ("+A+"%)"}}}}});new Chart($("#plot-totaldownloads"),{type:downloadTotalChartType,data:{labels:p,datasets:[{data:downloads_total,label:"Número de descargas de versión",borderColor:"#004f16",backgroundColor:"#004f16",fill:false,borderWidth:plotLineWidth,radius:2,pointStyle:"circle"}]},options:{title:{display:true,text:"Total de descargas de cada versión",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Descargas de cada versión"}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:false},tooltips:{mode:"index",intersect:false},responsive:true}});new Chart($("#plot-acumdownloads"),{type:"line",data:{labels:p,datasets:[{data:acum_downloads,label:"N° descargas acumuladas hasta versión",borderColor:"#9f0000",backgroundColor:"#9f0000",fill:false,borderWidth:plotLineWidth,radius:1,pointStyle:"circle"}]},options:{title:{display:false,text:"Descargas acumuladas",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Descargas acumuladas"}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:true}}});new Chart($("#plot-sizeversion"),{type:"line",data:{labels:lastversion_releases,datasets:[{data:lastdownloads_normal_size,label:"Versión normal",borderColor:"#ff8f2e",backgroundColor:"#ff8f2e",fill:false,borderWidth:plotLineWidth,radius:2,pointStyle:"circle"},{data:lastdownloads_compact_size,label:"Versión compacta",borderColor:"#ff346f",backgroundColor:"#ff346f",fill:false,borderWidth:plotLineWidth,radius:2,pointStyle:"triangle"}]},options:{title:{display:false,text:"Peso en KB de cada versión",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Peso (KB)"}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:true},tooltips:{callbacks:{label:function(e,u){var i=u.datasets[e.datasetIndex].data[e.index];i=i.toString();i=i.replace(".",",");return"Peso: "+i+" KB"}}}}});switch(downloadPartChartType){case"style1":new Chart($("#plot-partdownloads"),{type:"bar",data:{labels:lastversion_releases,datasets:[{data:lastday_total,label:"Días activo",borderColor:"#530071",backgroundColor:"#530071",fill:false,borderWidth:plotLineWidth,radius:1,pointStyle:"circle",yAxisID:"y-axis-2",type:"line"},{data:downloads_link_normal,label:"Versión normal",borderColor:"#057375",backgroundColor:"#057375",yAxisID:"y-axis-1"},{data:downloads_link_compact,label:"Versión compacta",borderColor:"#aab104",backgroundColor:"#aab104",yAxisID:"y-axis-1"}]},options:{title:{display:false,text:"Descargas por modo",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{display:true,position:"left",id:"y-axis-1",scaleLabel:{labelString:"Número de descargas",display:true,},stacked:true},{position:"right",id:"y-axis-2",gridLines:{drawOnChartArea:false,},scaleLabel:{labelString:"Días disponible",display:true,},stacked:false}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"},stacked:true}]},legend:{display:true},tooltips:{mode:"index",intersect:false,callbacks:{title:function(e,i){elemindex=lastversion_releases.indexOf(e[0].xLabel);if(elemindex!=-1){return String.format("Versión {0} ({1})",e[0].xLabel,m[elemindex])}else{return e[0].xLabel}}}},responsive:true}});break;case"style2":new Chart($("#plot-partdownloads"),{type:"line",data:{labels:lastversion_releases,datasets:[{data:downloads_link_normal,label:"Versión normal",borderColor:"#057375",backgroundColor:"#057375",fill:false,borderWidth:plotLineWidth,radius:2,pointStyle:"circle",tension:0,yAxisID:"y-axis-1"},{data:downloads_link_compact,label:"Versión compacta",borderColor:"#aab104",backgroundColor:"#aab104",fill:false,borderWidth:plotLineWidth,radius:2,pointStyle:"rect",tension:0,yAxisID:"y-axis-1"},{data:lastdownloads_total,label:"Suma",borderColor:"#001471",backgroundColor:"#001471",fill:false,borderWidth:plotLineWidth,radius:2,borderDash:[5,5],pointStyle:"cross",tension:0,yAxisID:"y-axis-1"},{data:lastday_total,label:"Días activo",borderColor:"#530071",backgroundColor:"#530071",fill:false,borderWidth:plotLineWidth,radius:1,pointStyle:"triangle",tension:0,yAxisID:"y-axis-2"}]},options:{title:{display:false,text:"Descargas por modo",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{display:true,position:"left",id:"y-axis-1",scaleLabel:{labelString:"Número de descargas",display:true,}},{display:true,position:"right",id:"y-axis-2",gridLines:{drawOnChartArea:false,},scaleLabel:{labelString:"Días disponible",display:true}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:true},tooltips:{mode:"index",intersect:false,callbacks:{title:function(e,i){elemindex=lastversion_releases.indexOf(e[0].xLabel);if(elemindex!=-1){return String.format("Versión {0} ({1})",e[0].xLabel,m[elemindex])}else{return e[0].xLabel}}}},responsive:true}});break;default:throwErrorID(errorID.invalidchartdownloadparttype,"");return}if(showPieDownloadChart){$("#plot-piedownloads").css("display","block");total_downloads_colors_pie=[];for(var j=0;j<downloads_total.length;j++){total_downloads_colors_pie.push("#"+(Math.random().toString(16)+"0000000").slice(2,8))}new Chart($("#plot-piedownloads"),{type:"pie",data:{labels:p,datasets:[{label:"Population (millions)",backgroundColor:total_downloads_colors_pie,borderColor:total_downloads_colors_pie,data:downloads_total}]},options:{title:{display:true,text:"Descargas por versión",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},legend:{display:false}}})}}catch(t){throwErrorID(errorID.downloadgraph,t);return}finally{}setTimeout(function(){$("#mainContent").fadeIn("slow",function(){$("#footer").css("display","inline-block");clearInterval(loadingBarAnimation);$("#progressLoading").html("");$("#progressLoading").fadeTo("slow",1)});console.log("Carga exitosa")},timeShowContentOnLoad)})}catch(o){throwErrorID(errorID.getdownloads,o);return}finally{}}catch(o){throwErrorID(errorID.criticaltemplateloading,o);return}finally{}})}function writeTableHeader(){$("#tableData").html('<table id="mainTable" class="display" width="100%" cellspacing="0"><thead><tr><th>ID</th><th>Versión</th><th>ctime</th><th>Fecha</th><th>Líneas</th><th>HASH</th></tr></thead><tfoot><tr><th>ID</th><th>Versión</th><th>ctime</th><th>Fecha</th><th>Líneas</th><th>HASH</th></tr></tfoot><tbody id="tableMem"></tbody></table>')}function writeGraphCanvases(){$("#graphSection").html('<canvas id="plot-ctime" class="graphCanvas" style="margin-top:-8.5px;"></canvas><canvas id="plot-totaldownloads" class="graphCanvas"></canvas><canvas id="plot-partdownloads" class="graphCanvas"></canvas><canvas id="plot-downloadsperday" class="graphCanvas"></canvas><canvas id="plot-pielastdays" class="graphCanvas"></canvas><canvas id="plot-acumdownloads" class="graphCanvas"></canvas><canvas id="plot-sizeversion" class="graphCanvas"></canvas><canvas id="plot-nline" class="graphCanvas"></canvas><canvas id="plot-piedownloads" class="graphCanvas"></canvas><canvas id="plot-activityday" class="graphCanvas"></canvas>')}function getDownloadCounter(b){updateDownloadCounter(0,b);return download_list_counter};