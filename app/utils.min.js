let loadingBarAnimation;if(!String.format){String.format=function(a){let $args=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(b,c){return typeof $args[c]!=="undefined"?$args[c]:b})}}$.urlParam=function(a){let $results=new RegExp("[?&]"+a+"=([^&#]*)").exec(window.location.href);if($results==null){return null}else{return decodeURI($results[1])||0}};function roundNumber(a,b){if(!(""+a).includes("e")){return +(Math.round(a+"e+"+b)+"e-"+b)}else{let $arr=(""+a).split("e");let $sig="";if(+$arr[1]+b>0){$sig="+"}let i=+$arr[0]+"e"+$sig+(+$arr[1]+b);let j=Math.round(i);return +(j+"e-"+b)}}function getMaxOfArray(a){return Math.max.apply(null,a)}function loadingBarTrigger(){$("#progressLoading").html(" ");switch(processBarAnimationStyle){case 1:let $bar=new ProgressBar.Circle("#progressLoading",{strokeWidth:processBarStrokeWidth,easing:"easeInOut",duration:timeDurationProcessBar,color:processBarColor,trailColor:processBarColor,trailWidth:0.01,svgStyle:null});$bar.animate(1);break;case 2:let $circle=new ProgressBar.Circle("#progressLoading",{color:processBarColor,trailColor:processBarLColor,strokeWidth:processBarStrokeWidth,duration:2500,easing:"easeInOut"});$circle.set(0.05);setTimeout(function(){$circle.animate(0.3)},1000);setTimeout(function(){$circle.animate(0.4)},3500);setTimeout(function(){$circle.animate(0.8)},5500);setTimeout(function(){$circle.animate(1)},8000);break}}function parseDate(a){let $mdy=a.split("-");return new Date(parseInt($mdy[0]),parseInt($mdy[1])-1,parseInt($mdy[2]))}function daydiff(b,a){return Math.round((a-b)/(1000*60*60*24))}function parseDevVersion(a){if(a.length>7){a=a.substring(0,7)}return a}function getURLParameter(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function changeUrlParam(c,b){let $currentURL=window.location.href+"&";let $change=new RegExp("("+c+")=(.*)&","g");let $newURL=$currentURL.replace($change,"$1="+b+"&");if(getURLParameter(c)!==null){try{window.history.replaceState("","",$newURL.slice(0,-1))}catch(a){console.log(a)}}else{let $currURL=window.location.href;if($currURL.indexOf("?")!==-1){window.history.replaceState("","",$currentURL.slice(0,-1)+"&"+c+"="+b)}else{window.history.replaceState("","",$currentURL.slice(0,-1)+"?"+c+"="+b)}}}function initializeChartjsPlugins(){Chart.pluginService.register({beforeRender:function(a){if(a.config.options.showAllTooltips){a.pluginTooltips=[];a.config.data.datasets.forEach(function(b,c){a.getDatasetMeta(c).data.forEach(function(d){a.pluginTooltips.push(new Chart.Tooltip({_chart:a.chart,_chartInstance:a,_data:a.data,_options:a.options.tooltips,_active:[d]},a))})});a.options.tooltips.enabled=false}},afterDraw:function(b,a){if(b.config.options.showAllTooltips){if(!b.allTooltipsOnce){if(a!==1){return}b.allTooltipsOnce=true}b.options.tooltips.enabled=true;Chart.helpers.each(b.pluginTooltips,function(c){c.initialize();c.update();c.pivot();c.transition(a).draw()});b.options.tooltips.enabled=false}}})}function loadTemplate(a){cleanErrorMsg();console.log(String.format("Cargando ID <{0}> ...",a));let $st;try{$st=stat[a]}catch(b){throwErrorID(errorID.badtemplateid,"");return}finally{}try{$("#templateNameTxt").html(String.format('<a href="{1}">{0}</a>',$st.header,$st.link));$(document).prop("title","Stats - "+$st.header);$("#progressLoading").fadeTo("slow",processBarSetOpacity);loadingBarTrigger();loadingBarAnimation=setInterval(function(){loadingBarTrigger()},timeDurationProcessBar+50)}catch(b){throwErrorID(errorID.loadingbarsetup,b);return}finally{}changeUrlParam("template",$st.tag);writeGraphCanvases();$("#tableMem").html("");if(!hasLoaded){$("#mainSelector option[value='none']").remove()}else{$("#footer").css("display","none");$("#mainContent").css("display","none");try{if($.fn.DataTable.isDataTable("#mainTable")){$("#mainTable").DataTable().clear().destroy();writeTableHeader()}}catch(b){throwErrorID(errorID.deletetable,b);return}finally{}}let $jsonQuery1=jQuery.get(String.format("{0}{1}",mainUrl,$st.data),function(d){try{d=d.split("\n");let $plot_id=[];let $plot_ctime=[];let $plot_nline=[];let $plot_ver=[];let $loadedData=[];try{for(let $i=1;$i<d.length;$i+=1){let $a=[];let $line=d[$i].split(" ");for(let $j=0;$j<$line.length;$j+=1){if($line[$j]!==""){$a.push($line[$j])}}$loadedData.push($a);$plot_id.push(parseInt($a[0]));$plot_ctime.push(parseFloat($a[2]));$plot_nline.push(parseInt($a[4]));$plot_ver.push(parseDevVersion($a[1]));$("#tableMem").append(String.format("<tr><td>{0}</td><td>{1}</td><td>{2}</td><td>{3}</td><td>{4}</td><td>{5}</td></tr>",$a[0],$a[1],$a[2],$a[3],$a[4],$a[5]))}}catch(c){throwErrorID(errorID.parsedata,c);return}finally{}try{let $lenghtmenuoption;if($loadedData.length>=tableMaxReg){$lenghtmenuoption=[tableMinReg,tableMedReg,tableHighReg,tableMaxReg]}else{if(tableHighReg<=$loadedData.length&&$loadedData.length<tableMaxReg){$lenghtmenuoption=[tableMinReg,tableMedReg,tableHighReg,$loadedData.length]}else{if(tableMedReg<=$loadedData.length&&$loadedData.length<tableHighReg){$lenghtmenuoption=[tableMinReg,tableMedReg,$loadedData.length]}else{if(tableMinReg<=$loadedData.length&&$loadedData.length<tableMedReg){$lenghtmenuoption=[tableMinReg,$loadedData.length]}else{$lenghtmenuoption=[$loadedData.length]}}}}$("#mainTable").DataTable({language:{url:"https://latex.ppizarror.com/stats/res/tableSpanish.json"},order:[[0,"desc"]],lengthMenu:$lenghtmenuoption})}catch(c){throwErrorID(errorID.generatetable,c);return}finally{}hasLoaded=true;let $mean_ctime,$plot_mean_ctime,$plot_partial_mean_ctime,$total_sum;try{$mean_ctime=roundNumber(jStat.mean($plot_ctime),2);$plot_mean_ctime=[];$plot_partial_mean_ctime=[];$total_sum=0;for(let k=0;k<$loadedData.length;k+=1){$plot_mean_ctime.push($mean_ctime);$total_sum+=$plot_ctime[k];$plot_partial_mean_ctime.push(roundNumber($total_sum/(k+1),2))}}catch(c){throwErrorID(errorID.calcctimemean,c);return}finally{}let $day_activity=[];let $day_activity_counter=[];try{for(let $i=0;$i<$loadedData.length;$i+=1){let $k=jQuery.inArray($loadedData[$i][3],$day_activity);if($k===-1){$day_activity.push($loadedData[$i][3]);$day_activity_counter.push(1)}else{$day_activity_counter[$k]+=1}}}catch(c){throwErrorID(errorID.errorcreatedayactivitystat,c);return}finally{}let $deleteindex=0;for(let $i=0;$i<$day_activity.length;$i+=1){if($day_activity_counter[$i]>40){$day_activity.splice($deleteindex,1);$day_activity_counter.splice($deleteindex,1);$deleteindex-=1}$deleteindex+=1}try{if($day_activity.length>1){new Chart($("#plot-activityday"),{type:"bar",data:{labels:$day_activity,datasets:[{data:$day_activity_counter,label:"Número de commits",borderColor:"#7e0042",backgroundColor:"#7e0042"}]},options:{title:{display:true,text:"Actividad por día",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Número de commits"},ticks:{min:0}}],xAxes:[{scaleLabel:{display:true,labelString:"Fecha"}}]},legend:{display:false},responsive:true,tooltips:{enabled:true,mode:"index",intersect:plotIntersectToShowLegend}}})}else{$("#plot-activityday").remove()}if(plotXaxisID){new Chart($("#plot-ctime"),{type:"line",data:{labels:$plot_id,datasets:[{data:$plot_ctime,label:"Tiempo de compilación (s)",borderColor:"#8436d7",backgroundColor:"#8436d7",fill:false,borderWidth:plotLineWidth,radius:1},{data:$plot_mean_ctime,label:"Promedio (s)",borderColor:"#e470f6",backgroundColor:"#e470f6",borderDash:[5,5],borderWidth:plotLineWidth,fill:false,radius:0},{data:$plot_partial_mean_ctime,label:"Promedio parcial (s)",borderColor:"#fccf5f",backgroundColor:"#fccf5f",borderWidth:2,fill:false,radius:0}]},options:{title:{display:true,text:"Tiempo de compilación",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},tooltips:{enabled:true,mode:"index",intersect:plotIntersectToShowLegend,callbacks:{title:function(e){let $elemindex=$plot_id.indexOf(parseInt(e[0].xLabel));if($elemindex!==-1){return String.format("ID:{2} v{0} ({1}) ",$loadedData[$elemindex][1],$loadedData[$elemindex][3],e[0].xLabel)}else{return e[0].xLabel}}}},responsive:true,scales:{yAxes:[{scaleLabel:{display:true,labelString:"Tiempo de compilación (s)"}}],xAxes:[{scaleLabel:{display:true,labelString:"ID de compilación"}}]},legend:{display:true}}});new Chart($("#plot-nline"),{type:"line",data:{labels:$plot_id,datasets:[{data:$plot_nline,label:"N° líneas de código",borderColor:"#3e95cd",backgroundColor:"#3e95cd",fill:false,radius:0,tension:0,borderWidth:plotLineWidth}]},options:{title:{display:true,text:"N° líneas de código en el tiempo",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Líneas de código"}}],xAxes:[{scaleLabel:{display:true,labelString:"ID de compilación"}}]},legend:{display:false},responsive:true,tooltips:{enabled:true,mode:"index",intersect:plotIntersectToShowLegend,callbacks:{title:function(e){let $elemindex=$plot_id.indexOf(parseInt(e[0].xLabel));if($elemindex!==-1){return String.format("ID:{2} v{0} ({1}) ",$loadedData[$elemindex][1],$loadedData[$elemindex][3],e[0].xLabel)}else{return e[0].xLabel}}}}}})}else{new Chart($("#plot-ctime"),{type:"line",data:{labels:$plot_ver,datasets:[{data:$plot_ctime,label:"Tiempo de compilación (s)",borderColor:"#8436d7",backgroundColor:"#8436d7",fill:false,borderWidth:plotLineWidth,radius:1},{data:$plot_mean_ctime,label:"Promedio (s)",borderColor:"#e470f6",backgroundColor:"#e470f6",borderDash:[5,5],borderWidth:plotLineWidth,fill:false,radius:0},{data:$plot_partial_mean_ctime,label:"Promedio parcial (s)",borderColor:"#fccf5f",backgroundColor:"#fccf5f",borderWidth:2,fill:false,radius:0}]},options:{title:{display:true,text:"Tiempo de compilación (ctime)",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},tooltips:{enabled:true,mode:"index",intersect:plotIntersectToShowLegend},responsive:true,scales:{yAxes:[{scaleLabel:{display:true,labelString:"Tiempo de compilación (s)"}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:true}}});new Chart($("#plot-nline"),{type:"line",data:{labels:$plot_ver,datasets:[{data:$plot_nline,label:"Número de líneas de código",borderColor:"#3e95cd",backgroundColor:"#3e95cd",fill:false,radius:0,tension:0,borderWidth:plotLineWidth}]},options:{title:{display:true,text:"Línea de código en el tiempo",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Líneas de código"}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:false},responsive:true,tooltips:{enabled:true,mode:"index",intersect:plotIntersectToShowLegend}}})}}catch(c){throwErrorID(errorID.genplots,c);return}finally{}let $downloads_link_compact=[];let $downloads_link_normal=[];let $downloads_total=[];let $globver_downloads=[];let $globver_releases=[];let $lastday_released=[];let $lastday_released_str=[];let $lastdownloads_normal_size=[];let $lastdownloads_total=[];let $lastversion_releases=[];let $let_downloads_releases=[];let $prev_downloads;let $sum_compactdownloads=0;let $sum_normaldownloads=0;let $var_downloads_releases=[];let $version_releases=[];let $jsonQuery2=$.getJSON($st.json,function(e){let $dptodownloads=[];let $dptodownloads_normal=[];let $dptodownloads_normal_total=[];let $dptodownloads_single=[];let $dptodownloads_single_total=[];let $dptodownloads_versions=[];let $dptos=[];let $dptototalvers=0;try{if($st.subdepto){let $id_compact=-1;let $id_normal=-1;let $lastrel=e[0].assets;for(let $i=0;$i<$lastrel.length;$i+=1){let $dpto=$lastrel[$i].name.split("-");if($dpto.length>=3){if($dpto.length===4){$dpto=$dpto[2]}else{$dpto=$dpto[2].replace(".min.zip","")}$dpto=$dpto.replace(".zip","");if($dptos.indexOf($dpto)===-1){$dptos.push($dpto);$dptodownloads_normal.push([]);$dptodownloads_single.push([]);$dptodownloads.push(0);$dptodownloads_normal_total.push(0);$dptodownloads_single_total.push(0)}}}let $adwl;for(let $i=e.length-1;$i>=0;$i--){if(e[$i].assets.length<=2){try{$downloads_link_compact.push(e[$i].assets[0].download_count);$downloads_link_normal.push(e[$i].assets[1].download_count);$downloads_total.push(e[$i].assets[0].download_count+e[$i].assets[1].download_count);$lastday_released_str.push(e[$i].published_at.substring(0,10));$lastday_released.push(parseDate(e[$i].published_at.substring(0,10)));$lastdownloads_normal_size.push(roundNumber(e[$i].assets[1].size/1000,2));$lastdownloads_total.push(e[$i].assets[0].download_count+e[$i].assets[1].download_count);$lastversion_releases.push(e[$i].tag_name);$sum_compactdownloads+=e[$i].assets[0].download_count;$sum_normaldownloads+=e[$i].assets[1].download_count;$let_downloads_releases.push(e[$i].assets[1].download_count);$version_releases.push(e[$i].tag_name)}catch(g){console.warn(g)}}else{$id_normal=-1;$id_compact=-1;let $rel=e[$i].assets;for(let $j=0;$j<$rel.length;$j+=1){if($rel[$j].name===String.format("{0}.zip",$st.name)){$id_normal=$j}if($rel[$j].name===String.format("{0}-Single.zip",$st.name)||$rel[$j].name===String.format("{0}.min.zip",$st.name)){$id_compact=$j}}if($id_normal===-1){throwErrorID(errorID.erroridnormalsingle,"");return}$dptototalvers+=1;$adwl=e[$i].assets;$lastday_released_str.push(e[$i].published_at.substring(0,10));$lastday_released.push(parseDate(e[$i].published_at.substring(0,10)));$lastdownloads_normal_size.push(roundNumber(e[$i].assets[$id_normal].size/1000,2));let $vdownload_normal=0;let $vdownload_single=0;let $isdpto=false;let $vrname,$dpto,$dptoindex,$ddl;for(let $j=0;$j<$adwl.length;$j+=1){$vrname=e[$i].assets[$j].name;$dpto=e[$i].assets[$j].name.split("-");if($vrname.includes(".min")){if($dpto.length===3){$dpto=$dpto[2].replace(".min.zip","")}else{$dpto=$dpto[1].replace(".min.zip","")}}else{if($dpto.length===4){$dpto=$dpto[2]}else{if($dpto.length===3){$dpto=$dpto[2].replace(".zip","")}else{$dpto=""}}}if($dpto==="diqbt"){$dpto="diqbtm"}$dptoindex=$dptos.indexOf($dpto);$isdpto=$dptoindex!==-1;$ddl=parseInt(e[$i].assets[$j].download_count);if($vrname.includes("Single")||$vrname.includes(".min")){$vdownload_single+=$ddl;if($isdpto){$dptodownloads_single[$dptoindex].push($ddl);$dptodownloads_single_total[$dptoindex]+=$ddl}}else{$vdownload_normal+=$ddl;if($isdpto){$dptodownloads_normal[$dptoindex].push($ddl);$dptodownloads_normal_total[$dptoindex]+=$ddl}}if($isdpto){$dptodownloads[$dptoindex]+=$ddl}}$downloads_link_compact.push($vdownload_single);$downloads_link_normal.push($vdownload_normal);$downloads_total.push($vdownload_normal+$vdownload_single);$lastdownloads_total.push($vdownload_normal+$vdownload_single);$lastversion_releases.push(e[$i].tag_name);$dptodownloads_versions.push(e[$i].tag_name);$sum_compactdownloads+=$vdownload_single;$sum_normaldownloads+=$vdownload_normal;$var_downloads_releases.push($vdownload_normal);$version_releases.push(e[$i].tag_name)}}}else{for(let $i=e.length-1;$i>=0;$i--){try{if(e[$i].assets.length===2){$downloads_link_compact.push(e[$i].assets[0].download_count);$downloads_link_normal.push(e[$i].assets[1].download_count);$downloads_total.push(e[$i].assets[0].download_count+e[$i].assets[1].download_count);$lastdownloads_normal_size.push(roundNumber(e[$i].assets[1].size/1000,2));$lastdownloads_total.push(e[$i].assets[0].download_count+e[$i].assets[1].download_count);$sum_compactdownloads+=e[$i].assets[0].download_count;$sum_normaldownloads+=e[$i].assets[1].download_count;$var_downloads_releases.push(e[$i].assets[1].download_count)}else{$downloads_link_compact.push(0);$downloads_link_normal.push(e[$i].assets[0].download_count);$downloads_total.push(e[$i].assets[0].download_count);$lastdownloads_normal_size.push(roundNumber(e[$i].assets[0].size/1000,2));$lastdownloads_total.push(e[$i].assets[0].download_count);$sum_compactdownloads+=0;$sum_normaldownloads+=e[$i].assets[0].download_count;$var_downloads_releases.push(e[$i].assets[0].download_count)}$lastversion_releases.push(e[$i].tag_name);$lastday_released_str.push(e[$i].published_at.substring(0,10));$lastday_released.push(parseDate(e[$i].published_at.substring(0,10)));$version_releases.push(e[$i].tag_name)}catch(g){console.warn(g)}}$("#plot-piedptototal").remove();$("#plot-piedptolast").remove();$("#plot-dptodownloadlines").remove()}try{$prev_downloads=getDownloadCounter($st.name)}catch(f){throwErrorID(errorID.retrievedownloadcounter,f);return}finally{}$prev_downloads.reverse();for(let $i=0;$i<$prev_downloads.length;$i+=1){let $vindx=$version_releases.indexOf($prev_downloads[$i][1]);if($vindx===-1){$version_releases.unshift($prev_downloads[$i][1]);$downloads_total.unshift($prev_downloads[$i][0])}else{}}for(let $i=0;$i<$var_downloads_releases.length;$i+=1){if($lastdownloads_total[$i]!==0){$var_downloads_releases[$i]=roundNumber(100*$var_downloads_releases[$i]/$lastdownloads_total[$i],downloadVariationRoundNumber)}else{$var_downloads_releases[$i]=roundNumber(0,downloadVariationRoundNumber)}}let $j=-1;let $lgv="",$gv;for(let $i=0;$i<$version_releases.length;$i+=1){$gv=$version_releases[$i].substring(0,2);if($gv[1]==="."){$gv=$gv[0]}else{if($gv[0]==="<"){$gv=$gv[1]}}if($lgv!==$gv){$globver_releases.push($gv);$globver_downloads.push($downloads_total[$i]);$j+=1}else{$globver_downloads[$j]+=$downloads_total[$i]}$lgv=$gv}let $acum_downloads=[$downloads_total[0]];for(let $i=1;$i<$downloads_total.length;$i+=1){$acum_downloads.push($downloads_total[$i]+$acum_downloads[$i-1])}let $lastday_total=[];for(let $i=0;$i<$lastday_released.length-1;$i+=1){$lastday_total.push(Math.max(daydiff($lastday_released[$i],$lastday_released[$i+1]),1))}let $last_ver_day_count=Math.max(daydiff($lastday_released[$lastday_released.length-1],new Date()),1);$lastday_total.push($last_ver_day_count);let $downloads_compact_per_day=[];let $downloads_normal_per_day=[];let $downloads_per_day=[];for(let $i=0;$i<$lastday_total.length;$i+=1){$downloads_compact_per_day.push(roundNumber($downloads_link_compact[$i]/$lastday_total[$i],2));$downloads_normal_per_day.push(roundNumber($downloads_link_normal[$i]/$lastday_total[$i],2));$downloads_per_day.push(roundNumber($lastdownloads_total[$i]/$lastday_total[$i],2))}let $last_n_version=Math.min(30,e.length);try{if(e.length>=1){if($st.subdepto){let $dpto_colors=[];let $nonzero_dptos=[];let $nonzero_dptos_downloads=[];let $sumdptodownloads=0;let $lastverldptos=$dptodownloads_normal[0].length-1;let $lastverdptosdownloads=[];let $lastdpdownloads=0;let $nonzero_dptos_datasets=[];let $max_downloads_dptos_perv=0;let $lastverdptos_dpt=[];let $lastverdptos_colors=[];let $lastverdptos_sum=0;let $dpto_color;let $dpto_dataset_list;for(let $i=0;$i<$dptos.length;$i+=1){if($dptodownloads[$i]>0){$nonzero_dptos.push($dptos[$i].toUpperCase());$nonzero_dptos_downloads.push($dptodownloads[$i]);$lastverdptos_sum=$dptodownloads_normal[$i][$lastverldptos];if(!isNaN($dptodownloads_single[$i][$lastverldptos])){$lastverdptos_sum+=$dptodownloads_single[$i][$lastverldptos]}$dpto_color="#"+(Math.random().toString(16)+"0000000").slice(2,8);$dpto_colors.push($dpto_color);if($lastverdptos_sum>0){$lastdpdownloads+=$lastverdptos_sum;$lastverdptosdownloads.push($lastverdptos_sum);$lastverdptos_dpt.push($dptos[$i].toUpperCase());$lastverdptos_colors.push($dpto_color)}$dpto_dataset_list=[];for(let $k=0;$k<$dptototalvers;$k+=1){let $c=0;if(!isNaN($dptodownloads_single[$i][$k])){$c=$dptodownloads_single[$i][$k]}let $v=0;if(!isNaN($dptodownloads_normal[$i][$k])){$v=$dptodownloads_normal[$i][$k]}let $total=$c+$v;$dpto_dataset_list.push($total);$sumdptodownloads+=$total}$max_downloads_dptos_perv=Math.max($max_downloads_dptos_perv,getMaxOfArray($dpto_dataset_list));let $hiddendpto=dptosDisplayDefaultLinePlot.indexOf($dptos[$i].toUpperCase())===-1;$nonzero_dptos_datasets.push({backgroundColor:$dpto_color,borderColor:$dpto_color,borderWidth:plotLineWidth,data:$dpto_dataset_list,fill:false,hidden:$hiddendpto,label:$dptos[$i].toUpperCase(),radius:1,tension:0.3})}}$max_downloads_dptos_perv=roundNumber($max_downloads_dptos_perv*1.2,0);new Chart($("#plot-dptodownloadlines"),{type:"line",data:{labels:$dptodownloads_versions,datasets:$nonzero_dptos_datasets},options:{title:{display:true,text:String.format("Descargas por departamento últimas {0} versiones",$dptototalvers),fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Número de descargas"},ticks:{beginAtZero:true,callback:function(h){if(h%1===0){return h}},max:$max_downloads_dptos_perv}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:true},responsive:true,tooltips:{enabled:true,intersect:plotIntersectToShowLegend,callbacks:{title:function(h){let $elemindex=$lastversion_releases.indexOf(h[0].xLabel);if($elemindex!==-1){return String.format("Versión {0} ({1})",h[0].xLabel,$lastday_released_str[$elemindex])}else{return h[0].xLabel}}}}}});if($lastdpdownloads>0){new Chart($("#plot-piedptolast"),{type:"pie",data:{labels:$lastverdptos_dpt,datasets:[{data:$lastverdptosdownloads,label:"N° descargas de cada versión",borderColor:$lastverdptos_colors,backgroundColor:$lastverdptos_colors}]},options:{title:{display:true,text:String.format("Distribución descargas departamentos última versión v{1} ({0} descargas)",$lastdpdownloads,$dptodownloads_versions[$lastverldptos]),fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},legend:{display:true,position:"right"},showAllTooltips:false,tooltips:{enabled:true,mode:"index",intersect:true,callbacks:{label:function(h,l){let $allData=l.datasets[h.datasetIndex].data;let $tooltipLabel=l.labels[h.index];let $tooltipData=$allData[h.index];let $total=0;for(let $i in $allData){$total+=parseInt($allData[$i])}let $tooltipPercentage=Math.round(($tooltipData/$total)*100);return $tooltipLabel+": "+$tooltipData+" ("+$tooltipPercentage+"%)"}}}}})}else{$("#plot-piedptolast").remove()}new Chart($("#plot-piedptototal"),{type:"pie",data:{labels:$nonzero_dptos,datasets:[{data:$nonzero_dptos_downloads,label:"N° descargas de cada versión",borderColor:$dpto_colors,backgroundColor:$dpto_colors}]},options:{title:{display:true,text:String.format("Distribución descargas departamentos últimas {1} versiones ({0} descargas)",$sumdptodownloads,$dptototalvers),fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},legend:{display:true,position:"right"},showAllTooltips:false,tooltips:{enabled:true,mode:"index",intersect:true,callbacks:{label:function(h,l){let $allData=l.datasets[h.datasetIndex].data;let $tooltipLabel=l.labels[h.index];let $tooltipData=$allData[h.index];let $total=0;for(let $i in $allData){$total+=parseInt($allData[$i])}let $tooltipPercentage=Math.round(($tooltipData/$total)*100);return $tooltipLabel+": "+$tooltipData+" ("+$tooltipPercentage+"%)"}}}}})}if(e.length>=1){new Chart($("#plot-downloadsperday"),{type:"line",data:{labels:$lastversion_releases,datasets:[{data:$downloads_per_day,label:"Total descargas por día",borderColor:"#2b2b2b",backgroundColor:"#2b2b2b",fill:false,radius:1,borderWidth:plotLineWidth},{data:$downloads_normal_per_day,label:"Modo normal",borderColor:"#606060",backgroundColor:"#606060",fill:false,radius:1,borderWidth:plotLineWidth},{data:$downloads_compact_per_day,label:"Modo compacto",borderColor:"#a4a4a4",backgroundColor:"#a4a4a4",fill:false,hidden:true,radius:1,borderWidth:plotLineWidth}]},options:{title:{display:true,text:String.format("Descargas por día últimas {0} versiones",$last_n_version),fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Descargas por día"}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:true},responsive:true,tooltips:{enabled:true,mode:"index",intersect:plotIntersectToShowLegend,callbacks:{title:function(h){let $elemindex=$lastversion_releases.indexOf(h[0].xLabel);if($elemindex!==-1){return String.format("Versión {0} ({1})",h[0].xLabel,$lastday_released_str[$elemindex])}else{return h[0].xLabel}}}}}});new Chart($("#plot-acumdownloads"),{type:"line",data:{labels:$version_releases,datasets:[{data:$acum_downloads,label:"N° de descargas acumuladas",borderColor:"#9f0000",backgroundColor:"#9f0000",fill:false,borderWidth:plotLineWidth,radius:0,tension:0.02,pointStyle:"circle"}]},options:{title:{display:true,text:"N° de descargas acumuladas",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Descargas acumuladas"}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:false},responsive:true,tooltips:{enabled:true,mode:"index",intersect:plotIntersectToShowLegend,callbacks:{title:function(h){return String.format("Versión {0}",h[0].xLabel)}}}}});new Chart($("#plot-totaldownloads"),{type:downloadTotalChartType,data:{labels:$version_releases,datasets:[{data:$downloads_total,label:"Número de descargas de versión",borderColor:"#004f16",backgroundColor:"#004f16",fill:false,borderWidth:plotLineWidth,radius:0,pointStyle:"circle"}]},options:{title:{display:true,text:"Total de descargas",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Descargas de cada versión"},ticks:{min:0,max:roundNumber(jStat.max($downloads_total)*0.12,0)*10}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:false},responsive:true,tooltips:{enabled:true,mode:"index",intersect:plotIntersectToShowLegend,callbacks:{title:function(h){return String.format("Versión {0}",h[0].xLabel)}}}}});if($globver_releases.length>1){new Chart($("#plot-gloverdownloads"),{type:"line",data:{labels:$globver_releases,datasets:[{data:$globver_downloads,label:"Descargas versión global",borderColor:"#8f7c31",backgroundColor:"#8f7c31",fill:false,borderWidth:plotLineWidth,radius:1,pointStyle:"circle"}]},options:{title:{display:true,text:"Descargas totales por versión global",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Descargas totales"}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión global"}}]},legend:{display:false},responsive:true,tooltips:{enabled:true,mode:"index",intersect:plotIntersectToShowLegend,callbacks:{title:function(h){return String.format("Versión {0}",h[0].xLabel)}}}}})}else{$("#plot-gloverdownloads").remove()}let $partDLchart=$("#plot-partdownloads");let $downloads_prevs_30="";for(let $i=0;$i<$downloads_link_normal.length;$i++){$downloads_prevs_30+=String.format("[[{0}, {1}], '{2}'],\n",$downloads_link_normal[$i],$downloads_link_compact[$i],$lastversion_releases[$i])}console.info($downloads_prevs_30);switch(downloadPartChartType){case"style1":new Chart($partDLchart,{type:"bar",data:{labels:$lastversion_releases,datasets:[{data:$lastday_total,label:"Días activo",borderColor:"#530071",backgroundColor:"#530071",fill:false,borderWidth:plotLineWidth,radius:1,pointStyle:"circle",yAxisID:"y-axis-2",type:"line"},{data:$downloads_link_normal,label:"Descargas normal",borderColor:"#057375",backgroundColor:"#057375",yAxisID:"y-axis-1"},{data:$downloads_link_compact,label:"Descargas compacta",borderColor:"#aab104",backgroundColor:"#aab104",yAxisID:"y-axis-1"}]},options:{title:{display:true,text:String.format("Descargas por versión y días activos últimas {0} versiones",$last_n_version),fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{display:true,position:"left",id:"y-axis-1",scaleLabel:{labelString:"Número de descargas",display:true},stacked:true},{position:"right",id:"y-axis-2",gridLines:{drawOnChartArea:false},scaleLabel:{labelString:"Días activo",display:true},stacked:false}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"},stacked:true}]},legend:{display:true},responsive:true,tooltips:{enabled:true,mode:"index",intersect:plotIntersectToShowLegend,callbacks:{title:function(h){let $elemindex=$lastversion_releases.indexOf(h[0].xLabel);if($elemindex!==-1){return String.format("Versión {0} ({1})",h[0].xLabel,$lastday_released_str[$elemindex])}else{return h[0].xLabel}}}}}});break;case"style2":new Chart($partDLchart,{type:"line",data:{labels:$lastversion_releases,datasets:[{data:$downloads_link_normal,label:"Versión normal",borderColor:"#057375",backgroundColor:"#057375",fill:false,borderWidth:plotLineWidth,radius:2,pointStyle:"circle",tension:0,yAxisID:"y-axis-1"},{data:$downloads_link_compact,label:"Versión compacta",borderColor:"#aab104",backgroundColor:"#aab104",fill:false,borderWidth:plotLineWidth,radius:2,pointStyle:"rect",tension:0,yAxisID:"y-axis-1"},{data:$lastdownloads_total,label:"Suma",borderColor:"#001471",backgroundColor:"#001471",fill:false,borderWidth:plotLineWidth,radius:2,borderDash:[5,5],pointStyle:"cross",tension:0,yAxisID:"y-axis-1"},{data:$lastday_total,label:"Días activo",borderColor:"#530071",backgroundColor:"#530071",fill:false,borderWidth:plotLineWidth,radius:1,pointStyle:"triangle",tension:0,yAxisID:"y-axis-2"}]},options:{title:{display:false,text:"Descargas por modo",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{display:true,position:"left",id:"y-axis-1",scaleLabel:{labelString:"Número de descargas",display:true}},{display:true,position:"right",id:"y-axis-2",gridLines:{drawOnChartArea:false},scaleLabel:{labelString:"Días activo",display:true}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:true},responsive:true,tooltips:{enabled:true,mode:"index",intersect:plotIntersectToShowLegend,callbacks:{title:function(h){let $elemindex=$lastversion_releases.indexOf(h[0].xLabel);if($elemindex!==-1){return String.format("Versión {0} ({1})",h[0].xLabel,$lastday_released_str[$elemindex])}else{return h[0].xLabel}}}}}});break;default:throwErrorID(errorID.invalidchartdownloadparttype,"");return}}else{$("#plot-acumdownloads").remove();$("#plot-downloadsperday").remove();$("#plot-gloverdownloads").remove();$("#plot-partdownloads").remove();$("#plot-totaldownloads").remove()}new Chart($("#plot-sizeversion"),{type:"line",data:{labels:$lastversion_releases,datasets:[{data:$lastdownloads_normal_size,label:"Versión normal",borderColor:"#ff8f2e",backgroundColor:"#ff8f2e",fill:false,borderWidth:plotLineWidth,hidden:false,radius:2,pointStyle:"circle"}]},options:{title:{display:true,text:String.format("Peso en KB de últimas {0} versiones",$last_n_version),fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},scales:{yAxes:[{scaleLabel:{display:true,labelString:"Peso (KB)"}}],xAxes:[{scaleLabel:{display:true,labelString:"Número de versión"}}]},legend:{display:false},responsive:true,tooltips:{enabled:true,mode:"index",intersect:plotIntersectToShowLegend,callbacks:{label:function(h,l){let $value=l.datasets[h.datasetIndex].data[h.index];$value=$value.toString();$value=$value.replace(".",",");return String.format("{0}: {1} KB",l.datasets[h.datasetIndex].label,$value)},title:function(h){let $elemindex=$lastversion_releases.indexOf(h[0].xLabel);if($elemindex!==-1){return String.format("Versión {0} ({1})",h[0].xLabel,$lastday_released_str[$elemindex])}else{return h[0].xLabel}}}}}});if(showPieDownloadChart){let $pieDL=$("#plot-piedownloads");$pieDL.css("display","block");let $total_downloads_colors_pie=[];for(let $i=0;$i<$downloads_total.length;$i+=1){$total_downloads_colors_pie.push("#"+(Math.random().toString(16)+"0000000").slice(2,8))}new Chart($pieDL,{type:"pie",data:{labels:$version_releases,datasets:[{label:"Descargas por versión",backgroundColor:$total_downloads_colors_pie,borderColor:$total_downloads_colors_pie,data:$downloads_total}]},options:{title:{display:true,text:"Descargas por versión",fontSize:plotTitleFontSize,fontStyle:plotTitleFontStyle},legend:{display:false}}})}}else{$("#plot-acumdownloads").remove();$("#plot-downloadsperday").remove();$("#plot-gloverdownloads").remove();$("#plot-partdownloads").remove();$("#plot-piedownloads").remove();$("#plot-sizeversion").remove();$("#plot-totaldownloads").remove()}}catch(f){throwErrorID(errorID.downloadgraph,f);return}finally{}setTimeout(function(){$("#mainContent").fadeIn("slow",function(){let $pld=$("#progressLoading");$("#footer").css("display","inline-block");clearInterval(loadingBarAnimation);$pld.html("");$pld.fadeTo("slow",1)});console.log("Carga exitosa")},timeShowContentOnLoad)}catch(f){throwErrorID(errorID.getdownloads,f)}finally{}});$jsonQuery2.fail(function(){throwErrorID(errorID.erroraccessjsonreleases,"")})}catch(c){throwErrorID(errorID.criticaltemplateloading,c)}finally{}});$jsonQuery1.fail(function(){throwErrorID(errorID.erroraccessfile,"")})}function writeTableHeader(){$("#tableData").html(String.format('<table id="mainTable" class="display" width="100%" cellspacing="0"><thead><tr><th>{0}</th><th>{1}</th><th>{2}</th><th>{3}</th><th>{4}</th><th>{5}</th></tr></thead><tfoot><tr><th>{0}</th><th>{1}</th><th>{2}</th><th>{3}</th><th>{4}</th><th>{5}</th></tr></tfoot><tbody id="tableMem"></tbody></table>',tableDataNameCols[0],tableDataNameCols[1],tableDataNameCols[2],tableDataNameCols[3],tableDataNameCols[4],tableDataNameCols[5]))}function writeGraphCanvases(){$("#graphSection").html('<canvas id="plot-ctime" class="graphCanvas" style="margin-top:-8.5px;"></canvas><canvas id="plot-totaldownloads" class="graphCanvas"></canvas><canvas id="plot-partdownloads" class="graphCanvas"></canvas><canvas id="plot-downloadsperday" class="graphCanvas"></canvas><canvas id="plot-acumdownloads" class="graphCanvas"></canvas><canvas id="plot-gloverdownloads" class="graphCanvas"></canvas><canvas id="plot-piedptototal" class="graphCanvas"></canvas><canvas id="plot-piedptolast" class="graphCanvas"></canvas><canvas id="plot-dptodownloadlines" class="graphCanvas"></canvas><canvas id="plot-sizeversion" class="graphCanvas"></canvas><canvas id="plot-nline" class="graphCanvas"></canvas><canvas id="plot-piedownloads" class="graphCanvas"></canvas><canvas id="plot-activityday" class="graphCanvas"></canvas>')}function getDownloadCounter(a){updateDownloadCounter(0,a);for(let $i=0;$i<download_list_counter.length;$i+=1){if(Array.isArray(download_list_counter[$i][0])){download_list_counter[$i][0]=download_list_counter[$i][0][0]+download_list_counter[$i][0][1]}}return download_list_counter};